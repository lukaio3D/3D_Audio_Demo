<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Audio Experience</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Credits
    "Yamaha Keyboard" (https://skfb.ly/o9VXO) by Ryan_Nein is licensed under Creative Commons Attribution (http://creativecommons.org/licenses/by/4.0/). -->
    <a-scene
      id="scene"
      class=""
      xr-mode-ui="XRMode: xr"
      webxr="optionalFeatures: dom-overlay; overlayElement: #overlay; referenceSpaceType: local-floor"
      loading-screen="dotsColor: red; backgroundColor: black"
      xstats
    >
      <a-assets>
        <audio
          id="ambienceSound"
          src="src/133100__klankbeeld__horror-ambience-10.mp3"
          preload="auto"
          loop
        ></audio>
        <audio
          id="ghostSound"
          src="src\175944__litruv__ghost-whispers.mp3"
          preload="auto"
        ></audio>
        <audio
          id="dinosaurSound"
          src="src\89549__cgeffex__dinosaur_loud-roar.mp3"
          preload="auto"
        ></audio>
        <audio
          id="robotSound"
          src="src\397253__screamstudio__robot.mp3"
          preload="auto"
        ></audio>
        <audio
        id="krabbenSound"
        src="src\126113__klankbeeld__laugh.mp3"
        preload="auto"
      ></audio>
        <a-asset-item id="ghostGLB" src="src\ghost_w_tophat.glb"></a-asset-item>
        <a-asset-item
          id="VorhangGLB"
          src="src\TheaterVorhang.glb"
        ></a-asset-item>
        <a-asset-item id="grabbyGLB" src="src\Grabby.glb"></a-asset-item>
        <a-asset-item id="robotGLB" src="src\FlyingRobot.glb"></a-asset-item>
        <a-asset-item
          id="dinosaurGLB"
          src="src\BitingDinosaur.glb"
        ></a-asset-item>
      </a-assets>

      <a-camera>
        <a-cursor
          cursor="fuse: false"
          geometry="primitive: ring; radiusInner: 0; radiusOuter: 0.005"
          material="color: white; shader: flat; opacity: 0.2"
          raycaster="objects: .collidable"
        ></a-cursor>
      </a-camera>

      <!--       <a-entity
        id="mouseCursor"
        cursor="rayOrigin: mouse"
        raycaster="objects: .collidable"
      ></a-entity> -->

      <a-entity
        environment="preset: starry; groundColor: #445; grid: none"
        hide-on-enter-ar
      ></a-entity>

      <a-entity
        light="intensity: 1.44; type: point"
        id="light"
        position="0 2.77844 -0.41772"
      ></a-entity>

      <a-box class="collidable" position="2 1 -3"></a-box>
      <a-box class="collidable" position="2 1 -1"></a-box>
      <a-box class="collidable" position="2 1 1"></a-box>
      <a-box class="collidable" position="2 1 3"></a-box>
      
      <a-gltf-model
        id="Vorhang1"
        gltf-model="#VorhangGLB"
        position="0 0 -3"
        animation-mixer="clip:none"
      ></a-gltf-model>

      <a-gltf-model
        id="Vorhang2"
        gltf-model="#VorhangGLB"
        position="-3 0 0"
        rotation="0 90 0"
        animation-mixer="clip:none"
      ></a-gltf-model>

      <a-gltf-model
        id="Vorhang3"
        gltf-model="#VorhangGLB"
        position="0 0 3"
        rotation="0 180 0"
        animation-mixer="clip:none"
      ></a-gltf-model>

      <a-gltf-model
        id="Vorhang4"
        gltf-model="#VorhangGLB"
        position="3 0 0"
        rotation="0 270 0"
        animation-mixer="clip:none"
      ></a-gltf-model>

      <a-entity id="ghostParent">
        >
        <a-gltf-model
          id="ghost3D"
          gltf-model="#ghostGLB"
          visible="true"
          position="0 1 -1.5"
          rotation="0 0 0"
          scale="0.3 0.3 0.3"
          sound="src: #ghostSound; loop: true;"
          animation-mixer
        ></a-gltf-model>
        <a-gltf-model
          id="robot3D"
          src="#robotGLB"
          position="-4 0.5 0"
          rotation="0 270 0"
          scale="0.8 0.8 0.8"
          visible="false"
          sound="src: #robotSound; loop: false; volume: 2"
        ></a-gltf-model>
        <a-gltf-model
          id="dinosaur3D"
          src="#dinosaurGLB"
          position="0 0 6.5"
          rotation="0 160 0"
          scale="1.2 1.2 1.2"
          visible="false"
          sound="src: #dinosaurSound; loop: false; volume: 6"
        ></a-gltf-model>
        <a-gltf-model
          id="grab3D"
          src="#grabbyGLB"
          position="4.5 0 0"
          rotation="0 90 0"
          scale="0.7 0.7 0.7"
          visible="false"
          sound="src: #krabbenSound; loop: false; volume: 5"
        ></a-gltf-model>
      </a-entity>

      <!--       <a-entity
        id="soundBall"
        geometry="primitive: sphere; radius: 0.23"
        position="-4 0.3 0"
        sound__birdwhistle3d="src: #birdSound; autoplay: true; loop: true"
        animation
      ></a-entity> -->

      <!--       <a-video position="0 1 -4" scale="2 3 2"></a-video>
      <a-image
        position="0 1 4"
        rotation="0 180 0"
        scale="3 2 3"
        src="src\egg-2187345_1280.png"
      ></a-image>
      <a-image
        position="4 1 0"
        scale="2 1.5 1"
        rotation="0 90 0"
        src="src\kermit-2687975_1280.jpg"
      ></a-image> -->
    </a-scene>

    <!-- introDOM -->
    <div
      id="introDOM"
      class="overlay fixed top-0 left-0 w-screen h-screen bg-black flex flex-col gap-8 justify-center items-center z-40"
    >
      <h1 class="text-gray-100 text-center text-5xl">3D Audio Experience</h1>
      <div class="h-16">
        <p id="loadingNotice" class="text-gray-100">Die Anwendung lädt</p>
        <button
          id="startButton"
          class="bg-gray-100 p-2 px-5 rounded-xl text-2xl hidden"
        >
          Start
        </button>
      </div>
    </div>

    <!-- sceneDOM -->
    <div
      id="overlay"
      class="flex flex-col justify-between items-center h-full text-gray-100"
    >
      <div>
        <p id="korrekteVersucheDOM">Richtig geraten: 0</p>
        <p id="fehlVersucheDOM">Falsch geraten: 0</p>
      </div>
      <h1 id="dialogBox" class="px-2 pb-16 text-center">Hallo Hallo</h1>

      <!-- WinnerDOM -->
      <div
        id="winnerDOM"
        class="fixed top-0 left-0 w-screen h-screen bg-black flex-col gap-8 justify-center items-center z-50 hidden"
      >
        <h1 class="text-gray-100 text-center text-5xl">
          Du hast gewonnen, Glückwunsch!
        </h1>
        <button
          id="startButton"
          class="bg-gray-100 p-2 px-5 rounded-xl text-2xl text-black"
          onclick="reloadApp()"
        >
          Neustart
        </button>
      </div>

      <!-- LoserDOM -->
      <div
        id="loserDOM"
        class="fixed top-0 left-0 w-screen h-screen bg-black flex-col gap-8 justify-center items-center z-50 hidden"
      >
        <h1 class="text-gray-100 text-center text-5xl">
          Du hast verloren. Probier es noch mal!
        </h1>
        <button
          id="startButton"
          class="bg-gray-100 p-2 px-5 rounded-xl text-2xl text-black"
          onclick="reloadApp()"
        >
          Neustart
        </button>
      </div>
    </div>
  </body>
  <script src="app.js"></script>
</html>
